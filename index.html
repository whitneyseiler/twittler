<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <script src="jquery.min.js" type="text/javascript"></script>
    <script src="jquery.timeago.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
    <title>Twittler</title>
  </head>

  <body>
    <header>
      <nav>
        <ul id="topnav">
          <li><a class="nav-link" href="index.html">Home</a></li>
          <li><a class="logo"><img width=20px padding=10px  src="https://image.flaticon.com/icons/svg/174/174876.svg"></a></li>
          <li style="float:right"><a class="nav-link" href="#search">Search</a></li>
          <li style="float:right"><a class="nav-link" href="#tweet">Tweet</a></li>
          <li style="float:right"><a class="nav-link" href="#profile">Profile</a></li>
        </ul>
      </nav>
    </header>

    <div id="main">
      <!-- <div id="sidebar">
        <p>This is a sidebar</p>
      </div> -->
    <div id="timeline">
        <h2>Feed</h2>
        <button class="refresh">See New Tweets</button>
        <div id="tweet-container">
          <script>

          $(document).ready(function() {
            var $feed = $('#tweet-container');
            index = 0;
            function showTweets() {
              var index = streams.home.length-1;
              while (index >= 0) {
                var tweet = streams.home[index];
                var $tweet = $('<div></div>').addClass('tweet');

                if (tweet !== undefined) {
                  $tweet.append('<a href="#" class="user">@' + tweet.user + '</a>: ' + tweet.message + ' - ' + jQuery.timeago(tweet.created_at));
                  $feed.prepend($tweet);
                  index -= 1;
                }
              }
            }
            showTweets();

            //refresh button
            $('.refresh').on('click', function() {
              showTweets();
            });

            //user's unique feed
            $('tweet.user').on('click', function (user) {
              var user = $(this).html();
              var index = streams.users.length-1;
              while (index >= 0) {
                if('@' + tweet.user === user){
                  var tweet = streams.users[user][index];
                  var $tweet = $('<div></div>').addClass('tweet');

                  if (tweet !== undefined) {
                    $tweet.append('<a href="#" class="user">@' + user + '</a>: ' + tweet.message + ' - ' + jQuery.timeago(tweet.created_at));
                    $feed.prepend($tweet);
                    index -= 1;
                  }
                }
              }
            });

            $('.home').on('click', function() {
              $feed.html('');
              streams.lastRead = 0;
              updateTweets();
            });
          });
          </script>
        </div>
      </div>
    </div>

  </body>
</html>
